apiVersion: v1
items:
#- apiVersion: route.openshift.io/v1
#  kind: Route
#  metadata:
#    annotations:
#      openshift.io/host.generated: "true"
#    labels:
#      app: istio-ingressgateway
#      app.kubernetes.io/component: gateways
#      app.kubernetes.io/instance: istio-system
#      app.kubernetes.io/managed-by: maistra-istio-operator
#      app.kubernetes.io/name: gateways
#      app.kubernetes.io/part-of: istio
#      app.kubernetes.io/version: 1.0.2-1.el8-1
#      chart: gateways
#      heritage: Tiller
#      istio: ingressgateway
#      maistra.io/owner: istio-system
#      release: istio
#    name: hipstershop
#    namespace: istio-system
#  spec:
#    host: hipstershop-istio-system.apps.cluster-74f1.74f1.sandbox1717.opentlc.com
#    port:
#      targetPort: http2
#    subdomain: ""
#    to:
#      kind: Service
#      name: istio-ingressgateway
#      weight: 100
#    wildcardPolicy: None

- apiVersion: networking.istio.io/v1alpha3
  kind: Gateway
  metadata:
    name: hipstershop-gateway
    namespace: hipstershop
  spec:
    selector:
      istio: ingressgateway
    servers:
    - hosts:
      - '*'
      port:
        name: http
        number: 80
        protocol: HTTP

- apiVersion: networking.istio.io/v1alpha3
  kind: VirtualService
  metadata:
    name: hipstershop-vs
    namespace: hipstershop
  spec:
    gateways:
    - hipstershop-gateway
    hosts:
    - '*'
    http:
    - match:
      - port: 80
      route:
      - destination:
          host: frontend-external
          port:
            number: 80

- apiVersion: networking.istio.io/v1alpha3
  kind: DestinationRule
  metadata:
    name: frontend-external
    namespace: hipstershop
  spec:
    host: frontend-external
    subsets:
    - labels:
        version: v1
      name: v1

kind: List
